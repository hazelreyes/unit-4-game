<!DOCTYPE html>
<html>

<head>
    <title>Crystals Collector!</title>
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>

<body>

    <h1><span id="number-to-guess"></span></h1>

    <p>Wins: <span id="wins"></span></p>
    <p>Losses: <span id="losses"></span></p>

    <div id="crystals"></div>

    <p>Your total score is: </p>

    <h1><span id="total-score"></span></h1>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script type="text/javascript">

        var targetNumber = (Math.floor(Math.random() * 120) + 19);
        $("#number-to-guess").text(targetNumber);

        var numberOptions = [];

        var crystals = ["assets/images/blue.jpg", "assets/images/purple.jpg",
            "assets/images/teardrop.png", "assets/images/pink.jpg"];

        var counter = 0;
        var wins = 0;
        var losses = 0;

        
        for (var i = 0; i < crystals.length; i++) {

            //Need to make an if/else statement so that numbers for crystals
            //will never equal one another
            /*if (i > 0) {
                
                for (let j = 0; j < crystals.length; j++) {
                    do {
                        var randomNumber = (Math.floor(Math.random() * 12) + 1);
                    } while (numberOptions.includes(randomNumber))
                    numberOptions.push(randomNumber);
                }

                var crystalImages = $("<img>");
                crystalImages.addClass("crystal-image");
                crystalImages.attr("data-crystalvalue", numberOptions[i]);
                crystalImages.attr("src", crystals[i]);
                $("#crystals").append(crystalImages);

            } else {*/
            var randomNumber = (Math.floor(Math.random() * 12) + 1);
            numberOptions.push(randomNumber);

            var crystalImages = $("<img>");
            crystalImages.addClass("crystal-image");
            crystalImages.attr("data-crystalvalue", numberOptions[i]);
            crystalImages.attr("src", crystals[i]);
            $("#crystals").append(crystalImages);
        }
    //}

        

        // This time, our click event applies to every single crystal on the page. Not just one.
        $(".crystal-image").on("click", function () {

            // Determining the crystal's value requires us to extract the value from the data attribute.
            // Using the $(this) keyword specifies that we should be extracting the crystal value of the clicked crystal.
            // Using the .attr("data-crystalvalue") allows us to grab the value out of the "data-crystalvalue" attribute.
            // Since attributes on HTML elements are strings, we must convert it to an integer before adding to the counter

            var crystalValue = ($(this).attr("data-crystalvalue"));
            crystalValue = parseInt(crystalValue);
            // We then add the crystalValue to the user's "counter" which is a global variable.
            // Every click, from every crystal adds to the global counter.
            counter += crystalValue;

            // All of the same game win-lose logic applies. So the rest remains unchanged.
            $("#total-score").html(counter);

            if (counter === targetNumber) {
                $("#total-score").html(counter);
                wins++;
                $("#wins").text(wins);
            }
            else if (counter >= targetNumber) {
                $("#total-score").html(counter);
                losses++;
                $("#losses").text(losses);
            }

        });

    </script>
</body>

</html>